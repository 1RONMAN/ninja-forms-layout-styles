!function(){var e,t,n;!function(o){function i(e,t){return M.call(e,t)}function l(e,t){var n,o,i,l,r,c,s,f,a,d,u,h=t&&t.split("/"),m=C.map,p=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),r=e.length-1,C.nodeIdCompat&&x.test(e[r])&&(e[r]=e[r].replace(x,"")),e=h.slice(0,h.length-1).concat(e),a=0;a<e.length;a+=1)if(u=e[a],"."===u)e.splice(a,1),a-=1;else if(".."===u){if(1===a&&(".."===e[2]||".."===e[0]))break;a>0&&(e.splice(a-1,2),a-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||p)&&m){for(n=e.split("/"),a=n.length;a>0;a-=1){if(o=n.slice(0,a).join("/"),h)for(d=h.length;d>0;d-=1)if(i=m[h.slice(0,d).join("/")],i&&(i=i[o])){l=i,c=a;break}if(l)break;!s&&p&&p[o]&&(s=p[o],f=a)}!l&&s&&(l=s,c=f),l&&(n.splice(0,c,l),e=n.join("/"))}return e}function r(e,t){return function(){var n=b.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(o,n.concat([e,t]))}}function c(e){return function(t){return l(t,e)}}function s(e){return function(t){g[e]=t}}function f(e){if(i(w,e)){var t=w[e];delete w[e],v[e]=!0,u.apply(o,t)}if(!i(g,e)&&!i(v,e))throw new Error("No "+e);return g[e]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return C&&C.config&&C.config[e]||{}}}var u,h,m,p,g={},w={},C={},v={},M=Object.prototype.hasOwnProperty,b=[].slice,x=/\.js$/;m=function(e,t){var n,o=a(e),i=o[0];return e=o[1],i&&(i=l(i,t),n=f(i)),i?e=n&&n.normalize?n.normalize(e,c(t)):l(e,t):(e=l(e,t),o=a(e),i=o[0],e=o[1],i&&(n=f(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},p={require:function(e){return r(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:d(e)}}},u=function(e,t,n,l){var c,a,d,u,h,C,M=[],b=typeof n;if(l=l||e,"undefined"===b||"function"===b){for(t=!t.length&&n.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(u=m(t[h],l),a=u.f,"require"===a)M[h]=p.require(e);else if("exports"===a)M[h]=p.exports(e),C=!0;else if("module"===a)c=M[h]=p.module(e);else if(i(g,a)||i(w,a)||i(v,a))M[h]=f(a);else{if(!u.p)throw new Error(e+" missing "+a);u.p.load(u.n,r(l,!0),s(a),{}),M[h]=g[a]}d=n?n.apply(g[e],M):void 0,e&&(c&&c.exports!==o&&c.exports!==g[e]?g[e]=c.exports:d===o&&C||(g[e]=d))}else e&&(g[e]=n)},e=t=h=function(e,t,n,i,l){if("string"==typeof e)return p[e]?p[e](t):f(m(e,t).f);if(!e.splice){if(C=e,C.deps&&h(C.deps,C.callback),!t)return;t.splice?(e=t,t=n,n=null):e=o}return t=t||function(){},"function"==typeof n&&(n=i,i=l),i?u(o,e,t,n):setTimeout(function(){u(o,e,t,n)},4),h},h.config=function(e){return h(e)},e._defined=g,n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),i(g,e)||i(w,e)||(w[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../lib/almond",function(){}),n("views/cellComposite",[],function(){var e=Marionette.CompositeView.extend({template:"#nf-tmpl-cell",className:"nf-cell",getChildView:function(){return o.channel("views").request("get:fieldLayout")},initialize:function(){this.collection=this.model.get("fields"),jQuery(this.el).css("width",this.model.get("width")+"%")},onRender:function(){0==this.collection.length&&jQuery(this.el).html("&nbsp;")},attachHtml:function(e,t){jQuery(e.el).find("nf-fields").append(t.el)}});return e}),n("views/rowComposite",["views/cellComposite"],function(e){var t=Marionette.CompositeView.extend({template:"#nf-tmpl-row",childView:e,className:"nf-row",initialize:function(){this.collection=this.model.get("cells")},onShow:function(){1<this.collection.length&&jQuery(this.el).closest(".nf-form-wrap").addClass("nf-multi-cell")},attachHtml:function(e,t){jQuery(e.el).find("nf-cells").append(t.el)}});return t}),n("views/rowCollection",["views/rowComposite"],function(e){var t=Marionette.CollectionView.extend({tagName:"nf-rows-wrap",childView:e});return t}),n("models/cellFieldCollection",[],function(){var e=Backbone.Collection.extend({comparator:"order",initialize:function(e,t){this.cellModel=t.cellModel,_.each(e,function(e){e.set("cellcid",this.cellModel.cid,{silent:!0})},this),this.listenTo(this.cellModel.collection.rowModel.collection,"validate:fields",this.validateFields)},validateFields:function(){_.each(this.models,function(e){o.channel("submit").trigger("validate:field",e)},this)}});return e}),n("models/cellModel",["models/cellFieldCollection"],function(e){var t=Backbone.Model.extend({initialize:function(){var t=this.collection.formModel.get("fields"),n=[];_.each(this.get("fields"),function(e){"undefined"==typeof t.get(e)?n.push(t.findWhere({key:e})):n.push(t.get(e))}),this.set("fields",new e(n,{cellModel:this})),this.listenTo(this.get("fields"),"change:errors",this.triggerErrors)},triggerErrors:function(e){this.collection.trigger("change:errors",e)}});return t}),n("models/cellCollection",["models/cellModel"],function(e){var t=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,t){this.rowModel=t.rowModel,this.formModel=t.formModel}});return t}),n("models/rowModel",["models/cellCollection"],function(e){var t=Backbone.Model.extend({initialize:function(){this.set("cells",new e(this.get("cells"),{rowModel:this,formModel:this.collection.formModel})),this.listenTo(this.get("cells"),"change:errors",this.triggerErrors)},triggerErrors:function(e){this.collection.trigger("change:errors",e)}});return t}),n("models/rowCollection",["models/rowModel"],function(e){var t=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,t){this.formModel=t.formModel},validateFields:function(){this.trigger("validate:fields",this)}});return t}),n("controllers/formContentFilters",["views/rowCollection","models/rowCollection"],function(e,t){var n=Marionette.Object.extend({initialize:function(){o.channel("formContent").request("add:viewFilter",this.getFormContentView,4),o.channel("formContent").request("add:loadFilter",this.formContentLoad,4),o.channel("fieldContents").request("add:viewFilter",this.getFormContentView,4),o.channel("fieldContents").request("add:loadFilter",this.formContentLoad,4)},getFormContentView:function(t){return e},formContentLoad:function(e,n){return!1==e instanceof Backbone.Collection?new t(e,{formModel:n}):e}});return n}),n("controllers/loadControllers",["controllers/formContentFilters"],function(e){var t=Marionette.Object.extend({initialize:function(){new e}});return t});var o=Backbone.Radio;t(["controllers/loadControllers"],function(e){var t=Marionette.Application.extend({initialize:function(e){this.listenTo(o.channel("app"),"after:loadControllers",this.loadControllers)},onStart:function(){console.log("start layout app")},loadControllers:function(t){new e}}),n=new t;n.start()}),n("main",function(){})}();
//# sourceMappingURL=almond.build.js.map
//# sourceMappingURL=front-end.js.map
