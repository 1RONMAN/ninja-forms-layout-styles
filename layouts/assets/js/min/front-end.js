!function(){var e,n,t;!function(o){function i(e,n){return M.call(e,n)}function l(e,n){var t,o,i,l,r,c,s,f,u,a,d,p=n&&n.split("/"),m=C.map,h=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(n){for(e=e.split("/"),r=e.length-1,C.nodeIdCompat&&y.test(e[r])&&(e[r]=e[r].replace(y,"")),e=p.slice(0,p.length-1).concat(e),u=0;u<e.length;u+=1)if(d=e[u],"."===d)e.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||h)&&m){for(t=e.split("/"),u=t.length;u>0;u-=1){if(o=t.slice(0,u).join("/"),p)for(a=p.length;a>0;a-=1)if(i=m[p.slice(0,a).join("/")],i&&(i=i[o])){l=i,c=u;break}if(l)break;!s&&h&&h[o]&&(s=h[o],f=u)}!l&&s&&(l=s,c=f),l&&(t.splice(0,c,l),e=t.join("/"))}return e}function r(e,n){return function(){var t=x.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),p.apply(o,t.concat([e,n]))}}function c(e){return function(n){return l(n,e)}}function s(e){return function(n){w[e]=n}}function f(e){if(i(g,e)){var n=g[e];delete g[e],v[e]=!0,d.apply(o,n)}if(!i(w,e)&&!i(v,e))throw new Error("No "+e);return w[e]}function u(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function a(e){return function(){return C&&C.config&&C.config[e]||{}}}var d,p,m,h,w={},g={},C={},v={},M=Object.prototype.hasOwnProperty,x=[].slice,y=/\.js$/;m=function(e,n){var t,o=u(e),i=o[0];return e=o[1],i&&(i=l(i,n),t=f(i)),i?e=t&&t.normalize?t.normalize(e,c(n)):l(e,n):(e=l(e,n),o=u(e),i=o[0],e=o[1],i&&(t=f(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:t}},h={require:function(e){return r(e)},exports:function(e){var n=w[e];return"undefined"!=typeof n?n:w[e]={}},module:function(e){return{id:e,uri:"",exports:w[e],config:a(e)}}},d=function(e,n,t,l){var c,u,a,d,p,C,M=[],x=typeof t;if(l=l||e,"undefined"===x||"function"===x){for(n=!n.length&&t.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(d=m(n[p],l),u=d.f,"require"===u)M[p]=h.require(e);else if("exports"===u)M[p]=h.exports(e),C=!0;else if("module"===u)c=M[p]=h.module(e);else if(i(w,u)||i(g,u)||i(v,u))M[p]=f(u);else{if(!d.p)throw new Error(e+" missing "+u);d.p.load(d.n,r(l,!0),s(u),{}),M[p]=w[u]}a=t?t.apply(w[e],M):void 0,e&&(c&&c.exports!==o&&c.exports!==w[e]?w[e]=c.exports:a===o&&C||(w[e]=a))}else e&&(w[e]=t)},e=n=p=function(e,n,t,i,l){if("string"==typeof e)return h[e]?h[e](n):f(m(e,n).f);if(!e.splice){if(C=e,C.deps&&p(C.deps,C.callback),!n)return;n.splice?(e=n,n=t,t=null):e=o}return n=n||function(){},"function"==typeof t&&(t=i,i=l),i?d(o,e,n,t):setTimeout(function(){d(o,e,n,t)},4),p},p.config=function(e){return p(e)},e._defined=w,t=function(e,n,t){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(t=n,n=[]),i(w,e)||i(g,e)||(g[e]=[e,n,t])},t.amd={jQuery:!0}}(),t("../lib/almond",function(){}),t("views/cellComposite",[],function(){var e=Marionette.CompositeView.extend({template:"#nf-tmpl-cell",className:"nf-cell",getChildView:function(){return o.channel("views").request("get:fieldLayout")},initialize:function(){this.collection=this.model.get("fields"),jQuery(this.el).css("width",this.model.get("width")+"%")},attachHtml:function(e,n){jQuery(e.el).find("nf-fields").append(n.el)}});return e}),t("views/rowComposite",["views/cellComposite"],function(e){var n=Marionette.CompositeView.extend({template:"#nf-tmpl-row",childView:e,className:"nf-row",initialize:function(){this.collection=this.model.get("cells")},onShow:function(){1<this.collection.length&&jQuery(this.el).closest(".nf-form-wrap").addClass("nf-multi-cell")},attachHtml:function(e,n){jQuery(e.el).find("nf-cells").append(n.el)}});return n}),t("views/rowCollection",["views/rowComposite"],function(e){var n=Marionette.CollectionView.extend({tagName:"nf-rows-wrap",childView:e});return n}),t("models/cellFieldCollection",[],function(){var e=Backbone.Collection.extend({comparator:"order",initialize:function(e,n){this.cellModel=n.cellModel;var t=this;_.each(e,function(e){e.set("cellcid",t.cellModel.cid,{silent:!0})})}});return e}),t("models/cellModel",["models/cellFieldCollection"],function(e){var n=Backbone.Model.extend({initialize:function(){var n=this.collection.formModel.get("fields"),t=[];_.each(this.get("fields"),function(e){"undefined"==typeof n.get(e)?t.push(n.findWhere({key:e})):t.push(n.get(e))}),this.set("fields",new e(t,{cellModel:this}))}});return n}),t("models/cellCollection",["models/cellModel"],function(e){var n=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,n){this.rowModel=n.rowModel,this.formModel=n.formModel}});return n}),t("models/rowModel",["models/cellCollection"],function(e){var n=Backbone.Model.extend({initialize:function(){this.set("cells",new e(this.get("cells"),{rowModel:this,formModel:this.collection.formModel}))}});return n}),t("models/rowCollection",["models/rowModel"],function(e){var n=Backbone.Collection.extend({model:e,comparator:"order",initialize:function(e,n){this.formModel=n.formModel}});return n}),t("controllers/fieldContentsFilters",["views/rowCollection","models/rowCollection"],function(e,n){var t=Marionette.Object.extend({initialize:function(){o.channel("fieldContents").request("add:viewFilter",this.getFieldContentsView,4),o.channel("fieldContents").request("add:loadFilter",this.fieldContentsLoad,4)},getFieldContentsView:function(n){return e},fieldContentsLoad:function(e,t){return!1==e instanceof Backbone.Collection?new n(e,{formModel:t}):e}});return t}),t("controllers/loadControllers",["controllers/fieldContentsFilters"],function(e){var n=Marionette.Object.extend({initialize:function(){new e}});return n});var o=Backbone.Radio;n(["controllers/loadControllers"],function(e){var n=Marionette.Application.extend({initialize:function(e){this.listenTo(o.channel("app"),"after:loadControllers",this.loadControllers)},onStart:function(){console.log("start layout app")},loadControllers:function(n){new e}}),t=new n;t.start()}),t("main",function(){})}();
//# sourceMappingURL=almond.build.js.map
//# sourceMappingURL=front-end.js.map
